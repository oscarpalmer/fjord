!function(){function t(t,e){for(var n=0,r=t.length;r>n;n++)e(t[n],n)}var e,n=window,r=n.document,o=[],i=n.location.href,c=n.location.protocol+"//"+n.location.host+"/",f=!!n.history,a="createEvent",u="onload",l="push",d="responseText",s="PageXOffset",h="PageYOffset";e={cache:function(t){var i;e.cached(t)?(i=e.find(t),i.x=n[s],i.y=n[h]):(i={body:r.body.innerHTML,title:r.title,url:t,x:n[s],y:n[h]},o.push(i))},cached:function(e){var n;return t(o,function(t){t.url===e&&(n=!0)}),n||!1},find:function(e){var n;return t(o,function(t){t.url===e&&(n=t)}),n},render:function(t,o){r.body.innerHTML=t.body,r.title=t.title,i=t.url,o===l?history.pushState({fjord:t.url},"",t.url):n.scrollTo(t.x,t.y),e.trigger("fjord:ready")},request:function(){return n.XMLHttpRequest?new n.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},trigger:function(t){var e;r[a]?(e=r[a]("Event"),e.initEvent(t,!0,!0)):e=new Event(t),r.dispatchEvent(e)},visit:function(t,r){var o,c=r===l?n.location.href:i;e.trigger("fjord:load"),e.cache(c),e.cached(t)?e.render(e.find(t),r):(o=e.request(),o[u]=function(){e.render({body:o[d].replace(/^[\s\S]+?<body>([\s\S]+?)<\/body>[\s\S]+?$/,"$1"),title:o[d].replace(/^[\s\S]+?<title>([\s\S]+?)<\/title>[\s\S]+?$/,"$1"),url:t,x:0,y:0},r)},o.open("GET",t,!0),o.send(null))}},f&&(n[u]=function(){history.replaceState({fjord:n.location.href},"")},n.onclick=function(t){var r=t.target;"A"===r.tagName&&0===r.href.indexOf(c)&&(t.preventDefault(),r.href!==n.location.href&&e.visit(r.href,l))},n.onpopstate=function(t){var n=t.state;n&&n.fjord&&e.visit(n.fjord,"pop")})}();